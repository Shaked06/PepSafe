# ============================================
# Project Pepper - Environment Variables
# For Render.com Deployment
# ============================================
# Copy this file and fill in your values
# DO NOT commit the filled .env file to git!

# ============================================
# DATABASE (Required)
# ============================================
# Render PostgreSQL: Use the "Internal Database URL" from your Render dashboard
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://pepper_user:YOUR_PASSWORD@YOUR_DB_HOST:5432/pepper_db

# ============================================
# REDIS CACHE (Required)
# ============================================
# Options:
# - Upstash (free tier): rediss://default:YOUR_TOKEN@YOUR_HOST.upstash.io:6379
# - Render Redis: redis://red-XXXX:6379
# - Railway Redis: redis://default:password@host:port
REDIS_URL=rediss://default:YOUR_UPSTASH_TOKEN@YOUR_HOST.upstash.io:6379

# Cache TTL (seconds) - How long to cache weather data
REDIS_WEATHER_TTL_SECONDS=600

# ============================================
# OPENWEATHERMAP API (Required)
# ============================================
# Get your free API key at: https://openweathermap.org/api
# Free tier: 1,000 calls/day (enough for ~1 call/minute)
OPENWEATHERMAP_API_KEY=your_openweathermap_api_key_here
OPENWEATHERMAP_BASE_URL=https://api.openweathermap.org/data/2.5

# ============================================
# API SECURITY (Required for Production)
# ============================================
# API key for authenticating /api/v1/ping endpoints
# Generate a secure key: openssl rand -hex 32
# This key must be added to OwnTracks as the X-API-KEY header
PEPSAFE_API_KEY=your_secure_api_key_here

# Header name for API key (default: X-API-KEY)
API_KEY_HEADER_NAME=X-API-KEY

# ============================================
# PRIVACY SETTINGS (Required)
# ============================================
# Home zone radius in meters - GPS pings within this radius are DROPPED
# Recommended: 50m (covers typical home + yard)
HOME_ZONE_RADIUS_METERS=50

# Silent drop: When true, home zone pings return 200 OK without any DB write
# When false, home zone pings are stored with nullified coordinates
HOME_ZONE_DROP_SILENTLY=true

# ============================================
# PEPPER'S HOME COORDINATES (Required for Privacy)
# ============================================
# Set these to your home address coordinates
# These are used to create a "privacy bubble" - no GPS data is stored within this zone
# Get coordinates: https://www.latlong.net/
PEPPER_HOME_LAT=32.0853
PEPPER_HOME_LON=34.7818

# ============================================
# USER CONFIGURATION
# ============================================
# Default user ID for Pepper (used by OwnTracks)
PEPPER_USER_ID=pepper

# ============================================
# RATE LIMITING
# ============================================
# Maximum API requests per minute per client
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# Burst allowance (extra requests allowed in short bursts)
RATE_LIMIT_BURST=10

# ============================================
# LOGGING
# ============================================
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# PRIVACY NOTE: Coordinates are NEVER logged regardless of level
LOG_LEVEL=INFO

# ============================================
# RENDER.COM SPECIFIC
# ============================================
# Port (Render sets this automatically, but you can override)
PORT=8000

# ============================================
# OPTIONAL: GOOGLE BUSYNESS API
# ============================================
# For future integration with real busyness data
# GOOGLE_PLACES_API_KEY=your_google_api_key

# ============================================
# OPTIONAL: NOTIFICATIONS
# ============================================
# For future push notification support
# WEB_PUSH_VAPID_PUBLIC_KEY=
# WEB_PUSH_VAPID_PRIVATE_KEY=
# WEB_PUSH_VAPID_EMAIL=

# ============================================
# CHOKE POINTS (Configure in API or DB)
# ============================================
# Choke points (known reactive trigger locations) are configured via the API:
# POST /api/v1/choke-points
# {
#   "name": "Dog Park Entrance",
#   "lat": 32.0855,
#   "lon": 34.7820,
#   "radius_m": 25,
#   "category": "dog_area"
# }
